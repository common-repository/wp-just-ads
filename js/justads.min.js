(function(f){var m='<div id="ads-loader"><div class="left stick"><span></span></div><div class="right stick"><span></span></div></div>';var b=Array();f(".ads-item a").on("click",i);f("a.adtitle").on("click",l);f(".ads-categories a").on("click",j);f("#ads-seach-form").submit(e);f("#ads-search-button").on("click",e);f("#captcha-refresh").on("click",d);f(".ads-nav-item").not(".current").on("click",j);f(window).hashchange(function(s){g(s)});function p(s,u,t){b.push(s);if(t===undefined){f(".ads-page-content").html(u)}else{f("#ads-search-results").html(u)}f(".ads-categories a").on("click",j);f("a.adtitle").on("click",l);f("#ads-seach-form").submit(e);f("#ads-search-button").on("click",e);f("#captcha-refresh").on("click",d);f(".ads-nav-item").not(".current").on("click",j);q();c();a();h();n()}function r(){var s=b[b.length-1].currentTarget;s.click()}function q(){f(".ads-error-message").fadeOut(300);f("#ads-form").submit(function(s){var z=f("#ads-title").val(),w=f("#ads-content").val(),v=f("#ads-price").val(),B=f("#ads-name").val(),C=f("#ads-phone").val(),A=f("#ads-location").val(),y=f("#ads-email").val(),t=f("#ads-category").val(),x=f("#ads-confirm").val(),u=f(this);if(!o(z,w,v,B,C,A,y,t,x)){f(".ads-error-message").html("Validation Error").fadeIn(300);return false}u.html(m);f.ajax({type:"post",url:jads_vars.url,data:{action:"jads_createAds",nonce:jads_vars.nonce,ads_title:z,ads_content:w,ads_price:v,ads_email:y,ads_location:A,ads_contact_name:B,ads_phone_number:C,ads_category:t,ads_confirm:x,ads_featured:JSON.parse(JADS_FEATURED_IMAGE.response)},success:function(D){u.html('<div class="jads-message"><h3>'+D+"</h3></div>")}});s.preventDefault()})}function i(s){var t=f(this).attr("id");window.history.pushState({html:f(document).html()},"",k(window.location.href)+"#"+t);f(".ads-page-content").html(m);f.ajax({type:"post",url:jads_vars.url,data:{action:"jads_get_ajax_template",template:t},success:function(u){p(s,u)}});s.preventDefault()}function g(s){var t=(window.location.hash).replace("#","");f(".ads-page-content").html(m);f.ajax({type:"post",url:jads_vars.url,data:{action:"jads_get_ajax_template",template:t},success:function(u){p(s,u)}})}function j(s){var t=f(this).attr("id"),v=f(this).data("category"),w=f(s.currentTarget).data("page"),x=f("#ads-current-page").data("page");if(!t){t=f(s.currentTarget).data("function");v=f(s.currentTarget).data("category")}function u(y,z,A,B){window.history.pushState({},"",k(window.location.href)+"#"+y);if(f("#ads-search-results").length==0){f(".ads-page-content").html(m)}else{f("#ads-search-results").html(m)}f.ajax({type:"post",url:jads_vars.url,data:{action:"jads_get_ajax_template",template:y,category:z,page:A,current_page:B},success:function(C){p(s,C)}})}u(t,v,w,x);s.preventDefault()}function e(s){var w=f("#ads-search-in-category").val(),t=f("#ads-search").val(),z=f("#ads-min-price").val(),u=f("#ads-max-price").val(),v=f("#search-by-city").val(),x=f(s.currentTarget).data("page"),y=f("#ads-current-page").data("page");f("#ads-search-results").html(m);f.ajax({type:"post",url:jads_vars.url,data:{action:"jads_get_ajax_template",template:"search_results",category:w,keyword:t,minimum_price:z,maximum_price:u,cities:v,page:x,current_page:y},success:function(A){p(s,A,true)}});s.preventDefault()}function l(s){var u=f(this).attr("id"),t="single_item";window.history.pushState({},"",k(window.location.href)+"#"+t);f(".ads-page-content").html(m);f.ajax({type:"post",url:jads_vars.url,data:{action:"jads_get_ajax_template",template:t,id:u},success:function(v){p(s,v)}});s.preventDefault()}function d(){f.ajax({type:"post",url:jads_vars.url,data:{action:"jads_captcha"},success:function(s){s=s.replace("/>0","/>");f(".ads-captcha").replaceWith(s);console.log(s)}})}function k(s){firstOccur=s.indexOf("#");return s.substr(0,firstOccur)}function a(){f("#ads-phone").formatter({pattern:"{{999}}-{{999}} {{999}} {{9999}}",persistent:false})}function c(){f("#ads-form input").on("keyup",function(w){switch(f(this).attr("type")){case"number":t(w,f(this));break;case"email":s(w,f(this));break}});function s(w,x){setTimeout(function(){var y=new RegExp("[a-zA-Z.0-9_-]+@[a-zA-Z0-9]+.[a-z]+");if(!y.test(x.val())){x.addClass("error");setTimeout(s,10000)}},10000)}function t(w,x){if(v(w.keyCode)&&!u(w.keyCode)){x.val(0)}}function u(w){if(w>=97&&w<=105){return true}return false}function v(w){if((w>64&&w<91)||(w>185&&w<193)||(w>218&&w<223)){return true}return false}}function o(){if(arguments.length>0){for(var s=0;s<arguments.length;s++){if(arguments[s]===""){return false}}}return true}function h(){var s=f("table[id^=ads-category-item-content-] > tbody > tr:not(:has(.ads-price))");f.each(s,function(t,u){f(u).html(f(u).html()+'<td class="ads-price" rowspan="3"></td>')})}function n(){var t=new plupload.Uploader(jads_vars.plupload);t.bind("Init",function(u){var v=f("#plupload-upload-ui");if(u.features.dragdrop){v.addClass("drag-drop");f("#drag-drop-area").bind("dragover.wp-uploader",function(){v.addClass("drag-over")}).bind("dragleave.wp-uploader.drop.wp-uploader",function(){v.removeClass("drag-over")})}else{v.removeClass("drag-drop");f("drag-drop-area").unbind(".wp-uploader")}s()});t.init();t.bind("FilesAdded",function(v,x){s();var w=10*1024*1024,u=parseInt(v.settings.max_file_size,10);plupload.each(x,function(y){if(u>w&&y.size>w&&v.runtime!="html5"){console.log("file size problem")}else{console.log(y);f(".drag-drop-buttons #uploaded").html(y.name)}});v.refresh();v.start()});t.bind("UploadProgress",function(u,w){var v=u.total.percent;f("#progressbar").fadeIn().progressbar({value:v})});t.bind("FileUploaded",function(u,w,v){window.JADS_FEATURED_IMAGE=v;console.log("sended")});function s(){f("#progressbar").fadeIn().progressbar({value:0})}}})(jQuery);